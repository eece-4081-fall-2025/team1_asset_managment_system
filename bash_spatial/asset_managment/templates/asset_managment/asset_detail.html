{% extends 'asset_managment/base.html' %}

{% block title %}{{ asset.name }} - Asset Details{% endblock %}

{% block content %}
<div style="margin-bottom: 20px;">
    <a href="{% url 'asset_list' %}" style="color: #667eea; text-decoration: none;">
        â† Back to Asset List
    </a>
</div>

<div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 30px;">
    <div>
        <h1 style="margin-bottom: 10px;">{{ asset.name }}</h1>
        <p style="color: #6b7280; font-size: 14px;">Asset ID: {{ asset.id }}</p>
    </div>
    <div style="display: flex; gap: 10px;">
        <a href="{% url 'asset_update' asset.pk %}" class="btn btn-primary">âœï¸ Edit Asset</a>
        <a href="{% url 'asset_delete' asset.pk %}" class="btn btn-danger">ğŸ—‘ï¸ Delete</a>
    </div>
</div>

<!-- Asset Status Badge -->
<div style="margin-bottom: 30px;">
    {% if asset.status == 'operational' %}
        <span style="background: #d1fae5; color: #065f46; padding: 8px 16px; border-radius: 12px; font-size: 14px; font-weight: 500;">
            âœ“ Operational
        </span>
    {% elif asset.status == 'out_for_repairs' %}
        <span style="background: #fef3c7; color: #92400e; padding: 8px 16px; border-radius: 12px; font-size: 14px; font-weight: 500;">
            ğŸ”§ Out for Repairs
        </span>
    {% elif asset.status == 'checked_out' %}
        <span style="background: #dbeafe; color: #1e40af; padding: 8px 16px; border-radius: 12px; font-size: 14px; font-weight: 500;">
            ğŸ“¤ Checked Out
        </span>
    {% elif asset.status == 'depricated' %}
        <span style="background: #fee2e2; color: #991b1b; padding: 8px 16px; border-radius: 12px; font-size: 14px; font-weight: 500;">
            âš  Deprecated
        </span>
    {% endif %}
</div>

<!-- Basic Information (Epic 1, Stories 8, 9) -->
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 40px;">
    <div>
        <h3 style="color: #374151; font-size: 18px; margin-bottom: 20px; border-bottom: 2px solid #e5e7eb; padding-bottom: 10px;">
            Basic Information
        </h3>
        
        <div style="display: grid; gap: 15px;">
            <div>
                <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 5px; font-weight: 500;">
                    Category
                </label>
                <p style="color: #1f2937; font-size: 16px;">{{ asset.category }}</p>
            </div>
            
            <div>
                <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 5px; font-weight: 500;">
                    Assigned To
                </label>
                <p style="color: #1f2937; font-size: 16px;">
                    {{ asset.assigned_to.username|default:"Unassigned" }}
                </p>
            </div>
            
            <div>
                <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 5px; font-weight: 500;">
                    Depreciation Date
                </label>
                <p style="color: #1f2937; font-size: 16px;">
                    {% if asset.depreciation %}
                        {{ asset.depreciation|date:"F d, Y" }}
                        {% if asset.is_overdue %}
                            <span style="color: #dc2626; font-weight: 500;">âš ï¸ Overdue</span>
                        {% endif %}
                    {% else %}
                        Not specified
                    {% endif %}
                </p>
            </div>
        </div>
    </div>
    
    <div>
        <h3 style="color: #374151; font-size: 18px; margin-bottom: 20px; border-bottom: 2px solid #e5e7eb; padding-bottom: 10px;">
            Timestamps
        </h3>
        
        <div style="display: grid; gap: 15px;">
            <div>
                <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 5px; font-weight: 500;">
                    Created
                </label>
                <p style="color: #1f2937; font-size: 16px;">{{ asset.created_at|date:"F d, Y g:i A" }}</p>
            </div>
            
            <div>
                <label style="display: block; color: #6b7280; font-size: 14px; margin-bottom: 5px; font-weight: 500;">
                    Last Updated
                </label>
                <p style="color: #1f2937; font-size: 16px;">{{ asset.updated_at|date:"F d, Y g:i A" }}</p>
            </div>
        </div>
    </div>
</div>

<!-- Custom Attributes (Epic 1, Stories 9, 10, 11) -->
<div style="margin-bottom: 30px;">
    <h3 style="color: #374151; font-size: 18px; margin-bottom: 20px; border-bottom: 2px solid #e5e7eb; padding-bottom: 10px;">
        Custom Attributes
    </h3>
    
    {% if asset.attributes_set.all %}
    <div style="background: #f9fafb; padding: 20px; border-radius: 8px;">
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="border-bottom: 2px solid #e5e7eb;">
                    <th style="padding: 12px; text-align: left; font-weight: 600; color: #374151; width: 40%;">
                        Attribute Name
                    </th>
                    <th style="padding: 12px; text-align: left; font-weight: 600; color: #374151;">
                        Value
                    </th>
                </tr>
            </thead>
            <tbody>
                {% for attribute in asset.attributes_set.all %}
                <tr style="border-bottom: 1px solid #e5e7eb;">
                    <td style="padding: 12px; color: #6b7280; font-weight: 500;">
                        {{ attribute.name }}
                    </td>
                    <td style="padding: 12px; color: #1f2937;">
                        {{ attribute.value }}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div style="text-align: center; padding: 40px; background: #f9fafb; border-radius: 8px; color: #9ca3af;">
        <p>No custom attributes added yet.</p>
        <p style="font-size: 14px; margin-top: 10px;">
            <a href="{% url 'asset_update' asset.pk %}" style="color: #667eea;">Edit this asset</a> to add attributes like serial number, purchase date, warranty info, etc.
        </p>
    </div>
    {% endif %}
</div>

<!-- Action Buttons -->
<div style="display: flex; gap: 10px; padding-top: 20px; border-top: 1px solid #e5e7eb;">
    <a href="{% url 'asset_update' asset.pk %}" class="btn btn-primary">
        âœï¸ Edit Asset Information
    </a>
    <a href="{% url 'asset_list' %}" class="btn btn-secondary">
        â† Back to List
    </a>
</div>
{% endblock %}